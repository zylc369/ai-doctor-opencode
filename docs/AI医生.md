# 80行文档实现AI医生：问诊 + 文献搜索和研究 产出SOAP诊断报告

## 医生的功能特点

- **智能问诊**：通过结构化问题收集患者症状和病史

- **病历分析**：支持上传和分析患者病历文件

- **医学研究**：实时搜索最新的医学文献、治疗指南和协议

- **鉴别诊断**：基于症状和研究结果进行精准诊断

- **治疗建议**：提供基于循证医学的治疗方案

- **SOAP 报告**：生成标准的医疗记录文档（主观、客观、评估、计划）

- **多语言支持**：自动跟随患者症状描述的语言输出

- **历史记录**：保存问诊过程和最终报告，支持复诊



## 技术架构特点

1. **多端运行**：支持**PC Web端**和**移动Web端**问诊。基于opencode的入口，UI已经适配双端。
2. **成本低廉**：
   1. **使用开源软件**：opencode。
   2. **免费模型**：使用免费模型也能做到上文中提到的“医生的功能特点”，我用的是opencode免费的大泡菜（big-pickle）模型。**这意味着不需要为Token付费。**
3. **可公网访问**：部署技术方案文档产出中。



## 效果速览

### 问诊输出的 SOAP 报告示例报告示例

1. **诊断报告**：[问诊记录](../examples/notes/张三-report-20260227_213304_000.md) - SOAP 格式的最终报告
2. **问诊记录**：[问诊记录](../examples/notes/张三-PatientNote-20260227_213304_000.md) - 实时问诊过程的详细记录



### 什么是SOAP？

**SOAP 是一种广泛应用于临床医学和健康照护领域的标准化病例记录格式**，用于系统化地组织患者信息，便于医疗专业人员沟通、评估和制定治疗计划。SOAP 是四个英文单词首字母的缩写，分别代表：

1. S – Subjective（主观资料）
2. O – Objective（客观资料）
3. A – Assessment（评估）
4. P – Plan（计划）



### 移动端问诊界面速览

展示核心操作界面。



#### 开始问诊/复诊

![](./images/复诊.jpg)



#### 允许上传病例

![](./images/允许上传病例.jpg)



#### 询问病灶细节，可多选

一次问诊过程中会多次询问病灶细节，下面是其中一次的截图：

![](./images/询问病灶细节_多选.png)



#### 经过一系列的问诊 → 研究、搜索医学文献 → 分析 → 制定方案 → 生成报告

**这个过程中通过网络搜索了医学文献。**

![](./images/一系列诊断步骤.jpg)



## 问诊输出

诊断完成后，会在 `notes/` 目录下生成以下文件：

- **问诊记录**：`[患者名]-PatientNote-[时间戳].md` - 实时问诊过程的详细记录
- **诊断报告**：`[患者名]-report-[时间戳].md` - SOAP 格式的最终报告



## 安装方法

### 1. **克隆仓库**

```bash
git clone https://github.com/zylc369/ai-doctor-opencode.git
cd ai-doctor-opencode
```

### 2. **全局安装（可选）**

将`.opencode/commands/dr-diagnose.md`拷贝到`~/.config/opencode/commands/dr-diagnose.md`。

**快捷命令：**`cp .opencode/commands/dr-diagnose.md ~/.config/opencode/commands/dr-diagnose.md`。



如果不想全局安装，可以直接在`ai-doctor-opencode`目录下启动opencode，进而快速体验。



## 使用方法

### 基本用法

在 OpenCode 中运行诊断命令：

```
/dr-diagnose [症状描述] [患者姓名]
```

### 参数说明

- `[症状描述]`（必需）：患者的主要症状
- `[患者姓名]`（可选）：患者的姓名



### 示例

```bash
# 诊断头痛症状，患者名为张三
/dr-diagnose 头痛 张三

# 诊断肩膀痛症状，稍后输入患者名
/dr-diagnose 我肩膀痛
```



## 公网访问的部署方案

文档编写中……
